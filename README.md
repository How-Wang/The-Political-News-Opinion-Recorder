# The Political News Opinion Recorder
**æ„è¨€æ—¢å‡ºï¼Œé§Ÿé¦¬é›£è¿½ï¼šæ”¿äº‹æ–°èæ„è¦‹ç´€éŒ„ç°¿** 
## Introduction  
ğŸ“° ä»¥äº‹ä»¶ç¾¤ã€è­°é¡Œç‚ºå–®ä½ï¼Œæ•´åˆå„å®¶åª’é«”æ‰€é‡‹å‡ºçš„è³‡è¨Š  
ğŸ—£ï¸ è¦–è¦ºåŒ–äººç‰©ç™¼è¨€å‘ˆç¾ã€æ•´ç†å–®ç¯‡æ–°èå…§çš„æ–‡ç« ï¼Œè¼”ä»¥æƒ…ç·’åˆ†æ  
ğŸ“ˆ æœ€å¾Œåˆ©ç”¨è­°é¡Œåˆ†é¡ã€äººç‰©åˆ¤æ–·ï¼Œè²«ç©¿æ™‚é–“è»¸ï¼Œç›´æ¥çœ‹å‡ºæ”¿æ²»äººç‰©é•·æœŸçš„æ„è¦‹è®ŠåŒ–ï¼
## Strength
|     | å‚³çµ±æ”¿æ²»æ–°è                   | æ”¿äº‹æ–°èæ„è¦‹ç´€éŒ„ç°¿             |
| --- | -------------------------- | ------------------------------ |
|æ•¸é‡| âŒå‹•è¼’æ•¸ç™¾ç¯‡ï¼Œæ•¸é‡é¾å¤§     | âœ”ï¸æ–°èè­°é¡Œåˆ†ç¾¤ï¼Œè®€æœ€é—œéµçš„æ–°è |
|å…§å®¹| âŒç´”æ–‡å­—æ–‡ç« çµæ§‹ï¼Œé›£ä»¥é–±è®€ | âœ”ï¸è¦–è¦ºåŒ–äººç‰©ç™¼è¨€ï¼Œè¼”ä»¥æƒ…ç·’åˆ†æ |
|æ™‚é–“| âŒåˆ†æ—¥å–®ç¯‡ï¼Œç„¡æ³•è¿½è¹¤æ”¿æ²»äººç‰©æ„è¦‹ |âœ”ï¸ä»¥è­°é¡Œèˆ‡æ”¿æ²»äººç‰©ç‚ºå–®ä½ï¼Œè²«ç©¿æ™‚é–“è»¸è¿½è¹¤|

## Architecture
![](https://i.imgur.com/0fxN3Tu.png)
1. å…ˆçˆ¬ä¸‹å¤šå®¶ç¶²è·¯åª’é«”çš„æ–°èï¼Œé€²è¡Œå‰è™•ç†ï¼Œçµ±ä¸€æ ¼å¼ã€‚
2. åŸ·è¡Œ `Name Entity Recognition` ï¼Œæ‰¾å‡ºæ–‡ç« ä¸­çš„å°ˆæœ‰åè©ï¼Œä¸¦å»é™¤æ™‚é–“ã€æ•¸é‡å€¼ç­‰ç­‰æ¯”è¼ƒæ²’æœ‰åˆ©ç”¨åƒ¹å€¼çš„å°ˆæœ‰åè©ï¼Œä»¥åˆ©å¾ŒçºŒçµ±è¨ˆå‡ºåˆ†ç¾¤é—œéµå­—ã€‚
3. æ ¹æ“šå‰›å‰›å¾—åˆ°çš„å°ˆæœ‰åè©ï¼Œè‡ªè¡Œå»ºç«‹ä¸€å€‹äººåå­—å…¸ï¼ŒæŠŠæ–‡ç« ä¸­è£¡é¢å‡ºç¾çš„äººç‰©å–®åæ ¹æ“šå­—å…¸åšçµ±ä¸€çš„ä»£æ›ã€‚
4. æ¥è‘—ä»»å‹™åˆ†æˆå…©éƒ¨åˆ†ï¼Œä¸€å€‹ç‚ºåˆ†ç¾¤ä»»å‹™ï¼Œå¦ä¸€å€‹ç‚ºæ„è¦‹æ“·å–ã€‚
5. åˆ†ç¾¤ä»»å‹™å…ˆåˆ©ç”¨ `BERTopic` å°æ–‡ç« é€²è¡Œåˆ†ç¾¤ï¼Œä½†å› ç‚ºæ™‚é–“ç¶­åº¦è¦åšåˆ°é•·æœŸçš„è­°é¡Œè¿½è¹¤ï¼Œæ‰€ä»¥å†æ ¹æ“šå·²ç¶“åˆ†å®Œç¾¤çš„ç•¶æ—¥è­°é¡Œï¼Œä½¿ç”¨ `sentence-transformer` ä»¥ `ckiplab/bert-base-chinese` ç‚º `embedder` å†åšä¸€æ¬¡ `KNN` åˆ†ç¾¤ï¼Œå¦‚æ­¤ä¸€ä¾†ï¼Œæˆ‘å€‘å°±å¯ä»¥çŸ¥é“å“ªå¹¾å¤©çš„å“ªäº›äº‹ä»¶æ˜¯å±¬æ–¼åŒä¸€å€‹è­°é¡Œï¼Œåšåˆ°è·¨å¤©çš„åˆ†é¡ã€‚
6. åœ¨æ„è¦‹æå–çš„éƒ¨åˆ†ï¼Œä½¿ç”¨å…©ç¨®æ–¹å¼åšé©—æ¸¬ï¼Œç¬¬ä¸€å€‹æ˜¯ä½¿ç”¨ `CKIPCoreNLP Toolkit Parsing Tree`ï¼›å¦ä¸€å€‹ç‚ºåˆ©ç”¨è‡ªè¡Œå»ºç«‹çš„å‹•è©å­—å…¸ï¼Œå†æ­é…`Name Entity Recognition` æ‰¾å‡ºå‹•ä¸»è©é…å°ã€‚
7. ç‚ºäº†é¿å…æ„è¦‹é‡è¤‡å‡ºç¾åœ¨åŒä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæ¥è‘—ä¸€æ¨£å†ä½¿ç”¨ç¬¬äº”é»æåˆ°çš„ `KNN` åˆ†ç¾¤ï¼ŒæŠŠç›¸ä¼¼åº¦é«˜çš„æ„è¦‹å»é™¤ã€‚
8. æ„è¦‹æå–å®Œå¾Œï¼Œä»¥ `NTUSD` æƒ…ç·’å­—å…¸ æ¯”è¼ƒæ“·å–å‡ºä¾†çš„æ„è¦‹ï¼Œä½œç‚ºåˆ¤æ–·æ­£è² æƒ…ç·’çš„ä¾æ“šã€‚
9. æœ€å¾Œæ ¹æ“šéœ€è¦çš„ UI æ¨¡å¼ï¼Œèª¿æ•´æª”æ¡ˆå½¢å¼ï¼Œä¸¦è‡ªè¡Œè¨­å®šè‡ªå‹•åŒ–çˆ¬å–ã€ä»¥ `Flask` ç‚ºæ¡†æ¶ï¼Œå°‡ç³»çµ±æ¶è¨­åœ¨ `Google Cloud Platform` ä»¥ä¾›é–±è½è€…ä½¿ç”¨ã€‚

## Toolkit Algorithms
### ä¸­æ–‡å‰–æç³»çµ±
#### æ¨¡å‹æ¶æ§‹
æ¡ç”¨æ©Ÿç‡å¼ç„¡èªå¢ƒè¦å¾‹çš„æ¨¡å‹ï¼ˆProbabilistic Context-free Grammarï¼‰ç‚ºåŸºæœ¬å‰–ææ¶æ§‹ï¼Œä¸¦åŠ å…¥çµæ§‹ä¸­ è©å½™æ­é…é—œä¿‚æ©Ÿç‡ è§£æ±ºçµæ§‹æ­§ç¾©çš„å•é¡Œ
[![](https://i.imgur.com/THFRIis.png)](https://ckip.iis.sinica.edu.tw/data/paper/conference/2004-ROCLING-O04-1015.pdf)
#### æ¨¡å‹çµæœ
æˆ‘å€‘ç¶“ç”±æ­¤ç³»çµ±å¯ä»¥å¾—å‡ºæ¨¹ç‹€çµæ§‹

![](https://i.imgur.com/Gd3mcuP.png)
- æ¨¹ç‹€çµæ§‹ä¸­çš„è³‡æ–™å…±æœ‰å…©ç¨®ï¼Œä»¥ä¸‹ç‚ºè§£é‡‹å’Œæœ¬æ¬¡å°ˆé¡Œæ‰€ä½¿ç”¨åˆ°çš„é …ç›®
    - èªæ„è§’è‰²ï¼šç”¨æ–¼ä¿®é£¾ç‰©é«”åè©ã€ä¿®é£¾äº‹ä»¶å‹•è©çš„è§’è‰²ï¼Œæœ‰å°‘æ•¸å¹¾å€‹ç”¨ä¾†æ¨™è¨˜èªæ³•åŠŸèƒ½
        - agentï¼šè¡¨äº‹ä»¶ä¸­çš„è‚‡å§‹è€…ï¼Œå‹•ä½œå‹•è©çš„è¡Œå‹•è€…
    - è©é¡åˆ†æï¼šæ¯ä¸€å€‹è©é¡éƒ½æœƒä»£è¡¨çš„ä¸€å®šçš„èªæ³•æ„ç¾©ï¼Œ
        - VE2 äºŒå…ƒè¿°è©ï¼šä»¥ä¸»äº‹è€…(agent)ç‚ºä¸»èªï¼Œçµ‚é»(goal)ç‚ºï¤†è³“èªï¼Œèªæ„å¤šç‚ºè¡¨èªè¨€ï¨ˆç‚ºä¹‹è¿°è©
        - VC å‹•ä½œå–®è³“è¿°è©ï¼šéœ€è¦ï¥¸å€‹ï¥«èˆ‡ï¥å…ƒï¼›åœ¨èªæ³•ä¸Šï¼Œé€™ï¥¸å€‹ï¥«èˆ‡ï¥å…ƒéƒ½æ˜¯åè©çµ„ï¼Œåˆ†åˆ¥å……ç•¶è¿°è©çš„ä¸»èªå’Œè³“èª
        - VE11 å‹•ä½œï¤†è³“è¿°è©ï¼šæ¥ï¤†å­ï¥å…ƒçš„å‹•ä½œè¿°è©ï¼Œèªæ„å¤šç‚ºèªè¨€ï¨ˆç‚ºæˆ–è¡¨æ€ç¶­æ´»å‹•ã€‚éœ€è¦ï¥¸å€‹æˆ–ä¸‰å€‹ï¥å…ƒï¤­æ»¿è¶³å…¶èªæ„


### BERTopic
- åˆ©ç”¨ toolkit `sentence transformer` æ­é… BERT (Bidirectional Encoder Representations from Transformers) æ¨¡å‹åšæ–‡ç«  embedding
- ä½¿ç”¨ UMAP é™ç¶­ï¼Œå®ƒå¯ä»¥ä½¿åŸ vector åœ¨ä½ç¶­åº¦ä¿æŒç›¸åŒçš„ structure
- ä½¿ç”¨ HDBSCAN åˆ†ç¾¤ï¼Œä¸”æ–‡ç«  outlier ä¸¦ä¸æœƒè¢«æ­¸é¡æˆå…¶ä¸­çš„ä¸€ç¾¤
- åˆ©ç”¨ c-TF-IDF æ‰¾å‡ºä»£è¡¨æ–‡ç« çš„é—œéµå­—
- MMR ç§»é™¤ overfit çš„å–®å­—(è·Ÿæ–‡ç« ç›¸ä¼¼åº¦é«˜ã€ä½†è·Ÿå…¶ä»–ä¸»é¡Œå–®å­—ç„¡é—œ)å¦‚ï¼šæ–‡ç« ä½œè€…
- >è£œå……ï¼šæœ¬æ¬¡å°ˆé¡Œæ²’æœ‰ä½¿ç”¨ Create topic representations from clusters çš„éƒ¨åˆ†ï¼Œæ”¹ä½¿ç”¨å¯¦é«”è¾¨è­˜ï¼ˆNamed Entity Recognition, NERï¼‰ä¾†å„ªåŒ–é—œéµå­—èƒå–

<a href="https://maartengr.github.io/BERTopic/algorithm/algorithm.html"><img src="https://i.imgur.com/U60qSnA.png" alt="drawing" style="width:500px;" /></a>
### å°ˆæœ‰åè©è¾¨è­˜ï¼ˆNamed Entity Recognition, NERï¼‰
- è¨“ç·´èªæ–™ï¼šä»¥ OntoNotes ä¸­æ–‡èªæ–™ç‚ºè¨“ç·´é›†ï¼ŒåŒ…å«æ–°èã€å»£æ’­ã€ç¶²èªŒã€é›»è©±ç­‰ç­‰å„ç¨®é¡å‹çš„èªæ–™
- ä¸­æ–‡å­—è©å‘é‡ï¼šåˆ©ç”¨ä¸­ç ”é™¢å¹³è¡¡èªæ–™åº«å’Œä¸­å¤®ç¤¾æ–°èè¨“ç·´ä¸­æ–‡å­—è©çš„å‘é‡è¡¨é”
- èªæ³•èˆ‡èªç¾©ç‰¹å¾µï¼šä»¥ CKIP ä¸­æ–‡æ–·è©ç³»çµ±å’Œä¸­æ–‡å‰–æç³»çµ±æ“·å–æ¬²æ¨™è¨˜æ–‡å­—çš„èªæ³•èˆ‡èªç¾©è³‡è¨Š
- æ·±åº¦éè¿´é¡ç¥ç¶“ç¶²è·¯æ¨¡å‹ï¼šåœ¨èªæ³•çµæ§‹ä¸Šéè¿´åœ°å‚³éç›¸é—œè³‡è¨Šåˆ°æ–‡å­—ä¸­çš„å„å€‹ç¾©å…ƒï¼Œç”¨æ–¼é æ¸¬å¯¦é«”ä½ç½®èˆ‡å¯¦é«”é¡åˆ¥ï¼Œè€Œæ¨¡å‹æ˜¯ä»¥ **BiLSTM(Bidirectional LSTM)** ä½œç‚ºåŸºç¤æ¶æ§‹

    <img src="https://i.imgur.com/WPuzubl.png" alt="drawing" style="width:500px;" />



## Website Demo
- [ğŸ”— Website Link](http://34.80.42.37:5000/)
- [ğŸ”— Introduction Video Link](https://youtu.be/UJtKTw_9lxM)
1. **é¦–é å‘ˆç¾æ–°èåˆ†ç¾¤çµæœ**
![](https://i.imgur.com/PoDxgvk.jpg)

2. **æ–°èåˆ†ç¾¤åˆ—è¡¨**
![](https://i.imgur.com/MWJaCxx.png)
   
3. **å–®ç¯‡æ–°èäººç‰©è¦–è¦ºåŒ–**
![image](https://user-images.githubusercontent.com/62500402/173530055-33cd1fe8-0536-4bf8-90e6-e2fb0c84a111.png)
![](https://i.imgur.com/XCVcvjd.png)
    
4. **æ”¿æ²»äººç‰©è­°é¡Œé•·æœŸè¿½è¹¤**
![](https://i.imgur.com/ywQBISA.png)
![](https://i.imgur.com/vBDzn0U.png)

## Implementation

```shell
# create an environment
# platform: win-64
$ conda create --name <env> --file requirements.txt

# under path ..\src\UI\
$ python app.py
```

## Analysis
    
### Different Version
|           | å‹•è©é¸æ“‡                     | ä¸»è©é¸æ“‡                                 |
| --------- | ---------------------------- | ---------------------------------------- |
| version 0 | æ‰‹å‹•å»ºç«‹å‹•è©å­—å…¸              | å‹•è©å¾€å‰ä¹‹ç‰¹å®šæ¢ä»¶ä¸‹çš„ç¬¬ä¸€å€‹å°ˆæœ‰åè©     |
| version 1 | Parsing Tree VE2             | èˆ‡å‹•è©å±¬åŒä¸€å¥å­çš„ agentï¼Œä¸”çµæ§‹ç‚ºä¸€å°ä¸€ |
| version 2 | Parsing Tree VE2 + VC + VE11 | èˆ‡å‹•è©å±¬åŒä¸€å¥å­çš„ agentï¼Œä¸”çµæ§‹ä¸é™     |

![](https://i.imgur.com/proLALS.png)

### Score

|           | precision | recall    | f1        |
| --------- | --------- | --------- | --------- |
| version 0 | ***0.689*** | 0.521     | 0.575     |
| version 1 | 0.679     | 0.518     | 0.569     |
| version 2 | 0.609     | ***0.699*** | ***0.639*** |

ï¼ˆä½¿ç”¨100ç¯‡æ‰‹å‹•æ¨™è¨˜ ettoday æ”¿æ²»æ–°èæ„è¦‹åšé©—è­‰ï¼‰
## Contributors
### Authors / Maintainers
- [@Howard](https://github.com/How-Wang)
- [@TCHuang](https://github.com/tc-huang)
### Reference
- [CKIP CoreNLP Toolkit](https://github.com/ckiplab/ckipnlp)
    - Peng-Hsuan Li, Tsu-Jui Fu, Wei-Yun Ma. â€œWhy Attention? Analyze BiLSTM Deficiency and Its Remedies in the Case of NERâ€. AAAI, Feb 2020.
    - Yu-Ming Hsieh, Duen-Chi Yang, Keh-Jiann Chen. â€œGrammar Extraction, Generalization and Specializationâ€. ROCLING, Sep 2004.
- [BERTopic](https://github.com/MaartenGr/BERTopic)
    - Maarten Grootendorst (2022). "BERTopic: Neural topic modeling with a class-based TF-IDF procedure". arÎ§iv:0707.0835
- [sentence-transformer](https://github.com/UKPLab/sentence-transformers)
- [IKMLab/Taiwan_news_dataset](https://github.com/IKMLab/Taiwan_news_dataset)
